var char;
var data = {
    series: [
        [

        ]
    ]
};

$(document).ready(function() {
    console.log("ready!");
    initChartist(data);
});


function cargarDatos() {
    var e = document.getElementById("moduloGenerico");
    var competencia = e.options[e.selectedIndex].value;
    var datosConsulta = []

    consultaGenericasPosicion().then(function(data) {

        for (let i = 1; i < data.response.length; i++) {
            datosConsulta[i] = { meta: data.response[i].INSTITUCION, value: parseInt(data.response[i].PROMEDIO) }
        }
        data = {
            series: [
                datosConsulta
            ]
        };

        char.update(data);
        console.log(data)
    })
}




function actualizarGrafica() {
    cargarDatos()
}

function initChartist(data) {
    var options = {
        seriesBarDistance: 5,
        axisX: {
            showGrid: false
        },
        height: "245px",
        plugins: [
            Chartist.plugins.tooltip()
        ]
    };

    var responsiveOptions = [
        ['screen and (max-width: 640px)', {
            seriesBarDistance: 5,
            axisX: {
                labelInterpolationFnc: function(value) {
                    return value[0];
                }
            }
        }]
    ];

    char = Chartist.Bar('#PosicionUniversidades', data, options, responsiveOptions);
}





// Base de datos falsa
var labels = ["universidad", "Competencia Ciudadana", "Ingles", "Lectura critica", "razonamiento cuantitativo"]
var bd = [

    ["UNIVERSIDAD LIBRE-SOCORRO", 214, 152, 188, 202],
    ["UNIVERSIDAD DE CARTAGENA-CARTAGENA", 206, 181, 188, 199],
    ["UNIVERSIDAD-COLEGIO MAYOR DE CUNDINAMARCA-BOGOTA D", 204, 165, 213, 199],
    ["UNIVERSIDAD LIBRE-PEREIRA", 204, 207, 228, 193],
    ["UNIVERSIDAD LIBRE-BOGOTA D.C.", 196, 173, 178, 192],
    ["CORPORACION UNIVERSIDAD PILOTO DE COLOMBIA-BOGOTA ", 196, 184, 192, 190],
    ["UNIVERSIDAD PEDAGOGICA Y TECNOLOGICA DE COLOMBIA-T", 191, 194, 221, 189],
    ["UNIVERSIDAD DEL SINU 'Elias Bechara Zainum' - UNIS", 190, 211, 191, 188],
    ["UNIVERSIDAD MANUELA BELTRAN-UMB--BUCARAMANGA", 190, 186, 194, 187],
    ["UNIVERSIDAD EIA-MEDELLIN", 187, 236, 198, 186],
    ["UNIVERSIDAD NACIONAL DE COLOMBIA-MEDELLIN", 186, 217, 193, 185],
    ["UNIVERSIDAD NACIONAL DE COLOMBIA-BOGOTA D.C.", 185, 200, 190, 184],
    ["UNIVERSIDAD DE SAN BUENAVENTURA-MEDELLIN", 185, 159, 192, 181],
    ["UNIVERSIDAD COOPERATIVA DE COLOMBIA-BUCARAMANGA", 184, 174, 166, 181],
    ["UNIVERSIDAD AUTONOMA LATINOAMERICANA-UNAULA-MEDELL", 181, 148, 192, 180],
    ["UNIVERSIDAD CATOLICA DE COLOMBIA-BOGOTA D.C.", 181, 204, 193, 179],
    ["PONTIFICIA UNIVERSIDAD JAVERIANA-CALI", 179, 210, 182, 178],
    ["UNIVERSIDAD EXTERNADO DE COLOMBIA-BOGOTA D.C.", 178, 206, 181, 178],
    ["UNIVERSIDAD PONTIFICIA BOLIVARIANA-MEDELLIN", 177, 196, 179, 177],
    ["UNIVERSIDAD DEL VALLE-CALI", 177, 186, 192, 176],
    ["UNIVERSIDAD FRANCISCO DE PAULA SANTANDER-OCANA", 176, 160, 178, 174],
    ["UNIVERSIDAD EAFIT--MEDELLIN", 176, 213, 179, 174],
    ["UNIVERSIDAD CES-MEDELLIN", 175, 192, 179, 174],
    ["UNIVERSIDAD DE LOS ANDES-BOGOTA D.C.", 175, 215, 191, 177],
    ["UNIVERSIDAD DEL NORTE-BARRANQUILLA", 174, 207, 180, 175],
    ["UNIVERSIDAD COOPERATIVA DE COLOMBIA-MEDELLIN", 174, 169, 175, 174],
    ["COLEGIO DE ESTUDIOS SUPERIORES DE ADMINISTRACION-C", 173, 225, 182, 174],
    ["UNIVERSIDAD DE ANTIOQUIA-MEDELLIN", 173, 188, 185, 174],
    ["FUNDACION UNIVERSITARIA JUAN N. CORPAS-BOGOTA D.C.", 173, 205, 195, 172],
    ["FUNDACION UNIVERSITARIA SEMINARIO TEOLOGICO BAUTIS", 173, 175, 162, 172],
    ["UNIVERSIDAD DE SAN BUENAVENTURA-BOGOTA D.C.", 172, 204, 182, 169],
    ["FUNDACION UNIVERSITARIA AGRARIA DE COLOMBIA -UNIAG", 172, 161, 171, 169],
    ["UNIVERSIDAD TECNOLOGICA DE PEREIRA - ITP-PEREIRA", 171, 178, 176, 167],
    ["UNIVERSIDAD ICESI-CALI", 171.6, 198, 168, 167],
    ["UNIVERSIDAD INDUSTRIAL DE SANTANDER-BUCARAMANGA", 171, 187, 186, 165],
    ["FUNDACION UNIVERSITARIA LUIS AMIGO FUNLAM-MEDELLIN", 170, 185, 194, 165],
    ["PONTIFICIA UNIVERSIDAD JAVERIANA-BOGOTA D.C.", 170, 200, 170, 163],
    ["UNIVERSIDAD EL BOSQUE-BOGOTA D.C.", 170, 189, 167, 163],
    ["UNIVERSIDAD NACIONAL DE COLOMBIA-MANIZALES", 170, 190, 186, 162],
    ["COLEGIO MAYOR DE NUESTRA SENORA DEL ROSARIO-BOGOTA", 170, 206, 176, 162],
    ["UNIVERSIDAD NACIONAL DE COLOMBIA-PALMIRA", 169, 170, 167, 161],
    ["UNIVERSIDAD AUTONOMA DE MANIZALES-MANIZALES", 169, 193, 169, 161],
    ["UNIVERSIDAD DE SANTANDER - UDES-BUCARAMANGA", 169, 164, 163, 160],
    ["UNIVERSIDAD SIMON BOLIVAR-BARRANQUILLA", 169, 200, 158, 160],
    ["FUNDACION UNIVERSITARIA PARA EL DESARROLLO HUMANO", 169, 193, 161, 159],
    ["UNIVERSIDAD SERGIO ARBOLEDA-BOGOTA D.C.", 185, 185, 171, 159],
    ["FUNDACION UNIVERSITARIA DE CIENCIAS DE LA SALUD-BO", 166, 166, 173, 158],
    ["UNIVERSIDAD MILITAR NUEVA GRANADA-BOGOTA D.C.", 166, 191, 164, 158],
    ["UNIVERSIDAD DE LA SABANA-CHIA", 165, 203, 179, 158],
    ["UNIVERSIDAD DE CIENCIAS APLICADAS Y AMBIENTALES UD", 165, 170, 148, 157],
    ["FUNDACION UNIVERSITARIA KONRAD LORENZ-BOGOTA D.C.", 165, 172, 163, 157],
    ["UNIVERSIDAD AUTONOMA DE BUCARAMANGA-UNAB-BUCARAMAN", 164, 198, 156, 157],
    ["UNIVERSIDAD SANTO TOMAS-TUNJA", 164, 162, 173, 157],
    ["UNIVERSIDAD PONTIFICIA BOLIVARIANA-BUCARAMANGA", 163, 180, 163, 156],
    ["UNIVERSIDAD COOPERATIVA DE COLOMBIA-BOGOTA D.C.", 162, 163, 176, 156],
    ["UNIVERSIDAD DEL TOLIMA-IBAGUE", 160, 153, 164, 156],
    ["UNIVERSIDAD DEL MAGDALENA - UNIMAGDALENA-SANTA MAR", 159, 176, 170, 155],
    ["UNIVERSIDAD ANTONIO NARINO-BOGOTA D.C.", 159, 160, 169, 155],
    ["CORPORACION UNIVERSITARIA DE ASTURIAS-BOGOTA D.C.", 159, 144, 150, 155],
    ["UNIVERSIDAD AUTONOMA DE OCCIDENTE-CALI", 157, 181, 172, 155],
    ["UNIVERSIDAD PONTIFICIA BOLIVARIANA-MONTERIA", 157, 178, 136, 154],
    ["UNIVERSIDAD AUTONOMA DEL CARIBE-BARRANQUILLA", 157, 175, 163, 154],
    ["UNIVERSIDAD DE CALDAS-MANIZALES", 157, 190, 174, 154],
    ["UNIVERSIDAD EAN-BOGOTA D.C.", 156, 190, 159, 153],
    ["FUNDACION UNIVERSITARIA DEL AREA ANDINA-BOGOTA D.C", 156, 173, 184, 152],
    ["UNIVERSIDAD CENTRAL-BOGOTA D.C.", 156, 168, 123, 152],
    ["UNIVERSIDAD NACIONAL ABIERTA Y A DISTANCIA UNAD-BO", 155, 183, 156, 151],
    ["ESCUELA COLOMBIANA DE INGENIERIA JULIO GARAVITO", 155, 197, 174, 151],
    ["UNIVERSIDAD DE LA SALLE-BOGOTA D.C.", 155, 165, 161, 150],
    ["FUNDACION UNIVERSIDAD AUTONOMA DE COLOMBIA -FUAC--", 154, 193, 155, 150],
    ["UNIVERSIDAD SANTO TOMAS-BUCARAMANGA", 153, 183, 165, 149],
    ["FUNDACION UNIVERSIDAD DE BOGOTA JORGE TADEO LOZA", 153, 193, 174, 149],
    ["CORPORACION UNIVERSITARIA MINUTO DE DIOS -UNIMINUT", 152, 142, 161, 149],
    ["UNIVERSIDAD SANTO TOMAS-BOGOTA D.C.", 152, 170, 161, 149],
    ["CORPORACION COLEGIATURA COLOMBIANA-MEDELLIN", 152, 194, 166, 148],
    ["UNIVERSIDAD DE CORDOBA-MONTERIA", 152, 169, 159, 148],
    ["UNIVERSIDAD DE MEDELLIN-MEDELLIN", 152, 184, 167, 146],
    ["INSTITUTO TECNOLOGICO METROPOLITANO-MEDELLIN", 152, 180, 152, 146],
    ["UNIVERSIDAD PEDAGOGICA NACIONAL-BOGOTA D.C.", 151, 160, 165, 145],
    ["UNIVERSIDAD DE BOYACA - UNIBOYACA-TUNJA", 151, 162, 168, 145],
    ["UNIVERSIDAD MARIANA-PASTO", 151, 182, 201, 144],
    ["FUNDACION UNIVERSITARIA CATOLICA DEL NORTE-SANTA R", 150, 162, 161, 144],
    ["UNIVERSIDAD DEL QUINDIO-ARMENIA", 150, 190, 163, 143],
    ["POLITECNICO GRANCOLOMBIANO-BOGOTA D.C.", 149, 200, 158, 142],
    ["UNIVERSIDAD DE SAN BUENAVENTURA-CALI", 149, 161, 149, 139],
    ["FUNDACION UNIVERSITARIA SAN MARTIN-BOGOTA D.C.", 149, 155, 156, 138],
    ["UNIVERSIDAD LIBRE-CUCUTA", 147, 196, 100, 137],
    ["COLEGIO MAYOR DE ANTIOQUIA-MEDELLIN", 147, 170, 172, 136],
    ["UNIVERSIDAD LIBRE-BARRANQUILLA", 147, 112, 175, 133],
    ["UNIVERSIDAD CATOLICA DE ORIENTE-RIONEGRO", 146, 140, 146, 133],
    ["UNIVERSIDAD DE LA AMAZONIA-FLORENCIA", 146, 120, 142, 132],
    ["FUNDACION UNIVERSITARIA INTERNACIONAL DEL TROPICO ", 145, 164, 150, 130],
    ["UNIVERSIDAD METROPOLITANA-BARRANQUILLA", 144, 162, 159, 130],
    ["UNIVERSIDAD DE PAMPLONA-PAMPLONA", 143, 203, 139, 128],
    ["CORPORACION UNIVERSITARIA REMINGTON-MEDELLIN", 143, 140, 142, 126],
    ["UNIVERSIDAD DE NARINO-PASTO", 142, 152, 165, 126],
    ["FUNDACION PARA LA EDUCACION SUPERIOR SAN MATEO", 142, 115, 123, 125],
    ["CORPORACION UNIVERSIDAD DE LA COSTA, CUC-BARRANQUI", 141, 157, 145, 124],
    ["ESCUELA DE INTELIGENCIA Y CONTRAINTELIGENCIA BRIGA", 141, 144, 152, 124],
    ["UNIVERSIDAD DE LOS LLANOS-VILLAVICENCIO", 140, 159, 161, 126],
    ["FUNDACION UNIVERSITARIA DEL AREA ANDINA-PEREIRA", 140, 154, 153, 125],
    ["UNIVERSIDAD DEL CAUCA-POPAYAN", 140, 170, 153, 124],
    ["CORPORACION UNIFICADA NACIONAL DE EDUCACION SUPERI", 137, 152, 154, 119],
    ["UNIVERSIDAD CATOLICA DE PEREIRA-PEREIRA", 136, 186, 139, 114],
    ["UNIVERSIDAD DISTRITAL FRANCISCO JOSE DE CALDAS", 136, 166, 155, 110],
    ["FUNDACION UNIVERSITARIA CAFAM-BOGOTA D.C.", 135, 186, 172, 104],
    ["CORPORACION UNIVERSITARIA LASALLISTA-CALDAS", 132, 195, 187, 103],
    ["FUNDACION UNIVERSITARIA LOS LIBERTADORES-BOGOTA D.", 131, 163, 158, 102],
    ["UNIVERSIDAD CATOLICA DE MANIZALES-MANIZALES", 130, 167, 161, 99],
    ["UNIVERSIDAD ECCI-BOGOTA D.C.", 126, 176, 110, 96],
    ["UNIPANAMERICANA - FUNDACION UNIVERSITARIA PANAMERI", 124, 172, 152, 88],
    // ["CORPORACION UNIVERSITARIA  UNITEC-BOGOTA D.C.", 121, 105, 181],
    // ["UNIVERSIDAD FRANCISCO DE PAULA SANTANDER-CUCUTA", 116, 166, 160],
    // ["UNIVERSIDAD DE MANIZALES-MANIZALES", 107, 195, 118],
    // ["INSTITUCION  UNIVERSITARIA PASCUAL BRAVO-MEDELLIN", 105, 169, 117],
    // ["POLITECNICO COLOMBIANO JAIME ISAZA CADAVID MED", 98, 182, 153]
]